#!/bin/sh
# Configure script for SCEPTIC.

# Compiler choice.
if [ .$COMPILER == . ] ; then
if [ -x "`which mpif77`" ] ; then
# By default use mpif77
   echo choosing compiler mpif77
   COMPILER=mpif77
   # COMPILE-SWITCHES choice
   if [ -n "`$COMPILER -show | grep g77`" ] ; then
       echo changing compile switches
       NW="-Wno-globals -Wno-unused-labels"
   else
       NW=$(NOWARN)
   fi
else
# Else use gfortran or g77.
   if [ -x "`which gfortran`" ] ; then
      echo choosing compiler gfortran
      COMPILER=gfortran
      NW=$(NOWARN)
   else
	if [ -x "`which g77`" ] ; then
	    echo choosing compiler g77
	    COMPILER=g77
	    echo changing compile switches
	    NW="-Wno-globals -Wno-unused-labels"
	else
	    COMPILER=$G77
     	fi
   fi   
fi
fi




# Xlib choice.
if [ "`uname -m`" == "x86_64" ] ; then
    echo choosing platform 64 bits
    LIB=/usr/X11R6/lib64/
fi

cat > makefile <<EOF
# This is the configured makefile, which is used for the full make.
################ DO NOT EDIT THIS FILE. EDIT Makefile #############
# Here we have stuff that we determine by configuration.
G77=$COMPILER
XLIB=$LIB
NOWARN=$NW
# That ends by having the original Makefile tacked on the end.
###################################################################
EOF
cat Makefile >>makefile
