<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
           "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<meta name="GENERATOR" content="TtHgold 3.70">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>

<title>  Summary of ACCIS plotting system routines</title>
 
<h1 align="center"><b>Summary of ACCIS plotting system routines</b> </h1>

<div class="p"><!----></div>

<table align="center" border="0"><tr><td>
I.H.Hutchinson</td></tr></table><!--hboxt-->

<div class="p"><!----></div>
<br /><br />
<h2> Conventions
</h2>
For purposes of this summary, the following implicitly indicate types:
i: integer, c: character, l: logical, all others: real.
Terminating letter indicates: v: vector (1-d array), a: 2-d array.

<div class="p"><!----></div>

<h2> Automatic plotting, single call plots.
</h2>
AUTOPLOT(xv,yv,ilength) Line plot yv versus xv; linear axes.

<div class="p"><!----></div>
AUTOMARK(xv,yv,ilength,isym) Plot using symbol isym.

<div class="p"><!----></div>
LAUTOPLOT(xv,yv,ilength,lnx,lny) Line plot with logarithmic axis in x or y.

<div class="p"><!----></div>
LAUTOMARK(xv,yv,ilength,lnx,lny,isym) Symbol plot with logarithmic axis(es).

<div class="p"><!----></div>
YAUTOPLOT(yv,ilength) Line plot yv versus index; linear axes.

<div class="p"><!----></div>

<h2> Setup
</h2>
PLTINIT(xmin,xmax,ymin,ymax) Switch to graphics, set world scaling.

<div class="p"><!----></div>
FITINIT(xmin,xmax,ymin,ymax) same but fitting nice ranges.

<div class="p"><!----></div>
SCALEWN(xmin,xmax,ymin,ymax,lnx,lny) Set world scaling, possibly log.

<div class="p"><!----></div>
FITSCALE(xmin,xmax,ymin,ymax,lnx,lny) same but fitting nice ranges.

<div class="p"><!----></div>
PLTINASPECT(xmin,xmax,ymin,ymax) Initiate graphics. Resize axis region
to retain aspect ratio of plot. Set world scaling.

<div class="p"><!----></div>
AXREGION(xin,xan,yin,yan) Set the axis region in normal units.
Default: .31,.91,.1,.7

<div class="p"><!----></div>
AXPTSET(xfrac,yfrac) Set the axis point (i.e. intersection) at specified
fraction of the plot region. (Default 0.,0.)

<div class="p"><!----></div>
MULTIFRAME(irows,icolumns,ispace) For subsequent plots (using pltinit),
plot irows x icolumns plots per page, with label space determined by
ispace (bit0 implies space x, bit1 y). Call with irows=0, single frame.

<div class="p"><!----></div>
PFSET(inum) Set file plotting for hardcopy. inum=(0:no, 1:hp, 2:ps, 3:eps).
If inum.eq.-1, then prompt for choice. If inum.lt.-1 output to file
only, not screen.

<div class="p"><!----></div>
WINSET(lwin) Set windowing to axis-region on or off (.false. default).

<div class="p"><!----></div>
TRUNCF(xmin,xmax,ymin,ymax) Set rectangular truncation (windowing) norm-units.
If all args=0, switch off (default).

<div class="p"><!----></div>
PLTEND() Flush graphics, wait for carriage return. Then close, return to text.

<div class="p"><!----></div>

<h2> Color
</h2>
<a href="filltest.f"><img align="right" src="filltest.png"></a>
COLOR(icol) Set current color of 0-15. Default 15 black (on white).

<div class="p"><!----></div>
GRADCOLOR(icol) Set current color from a 0-240 color gradient range.

<div class="p"><!----></div>
ACCISGRADINIT(ir1,ig1,ib1,ir2,ig2,ib2) Set the gradient color range,
rgb amplitudes 0-65535.

<div class="p"><!----></div>
IGETCOLOR() Integer function.  Get the number of the current
color. [You have to know if it is a 0-15 or a gradient color].

<div class="p"><!----></div>
PATHFILL() Fill the path just drawn, with the current color. A path is
a set of vectors all drawn with pen down one after the other.

<div class="p"><!----></div>
IDARKBLUE(), IDARKGREEN(),  ISKYBLUE(),  IBRICKRED(),  IPURPLE(),
IGOLD(),  IGRAY(),  ILIGHTGRAY(),  IBLUE(),  IGREEN(),  ICYAN(),
IRED(),  IMAGENTA(),  IYELLOW(),  IBLACK(): Integer functions returning
the 16-color number that gives what their name indicates (=1<font face="symbol">-</font
>15).

<div class="p"><!----></div>
GRADLEGEND(c1,c2,x1,y1,x2,y2,colwidth,lpara) draw a color gradient
axis-legend. Value corresponding to color goes from c1 to c2: the ends of
the color gradient. Position of axis is (x1,y1) to (x1,y2) in axis-box
units. Width of color bar is colwith times axis-box
width. lpara=.true. says use parallel labels.

<div class="p"><!----></div>

<h2> Data plotting
</h2>
POLYLINE(xv,yv,ilength) Draw a polyline on an already setup graph.

<div class="p"><!----></div>
DASHSET(idash) Set dashed line character for polyline. 
(0:solid, 1:long, 2:short, 3:long/short, 4:dots)

<div class="p"><!----></div>
LABELINE(xv,yv,ilength,clabel,ilablen) Draw polyline with embedded label
of length ilablen.

<div class="p"><!----></div>
YPOLYLINE(yv,ilength) Draw a polyline on an already setup yautoplot.

<div class="p"><!----></div>
POLYMARK(xv,yv,ilength,isym) Draw data marked by symbols isym:
1 hollow square, 2 hollow triangle, 3 bullet, 4 solid square, 5 solid 
triangle, 6 hollow star, 7 solid star, 8 hollow diamond, 9 flag, 10 +,
11 x, 12 diamond, 13 -, 14 inverted triangle, 15 circle. Else
char(isym), so ichar('c') gives 'c', ichar('c')+128 gives the font-2
symbol corresponding to 'c' (xi).

<div class="p"><!----></div>
POLYDRAW(xv,yv,ilength,DRAWFN) Draw data marked by symbol defined by
the routine DRAWFN, a subroutine with 2 real arguments, being the
normalized x and y position of the symbol center, which draws the symbol.
Specify EXTERNAL DRAWFN in the calling routine. Built-in routines are
ACCIRCLE, ACTRID, ACAST, ACX, ACPLUS.

<div class="p"><!----></div>
ACGEN(x,y) is a general routine to be passed to POLYDRAW that will draw a
user-defined symbol without having to define an actual
function. Instead the subroutine ACGSET(xv,yv,ilength,ifill) is called
first with arguments giving the symbol vertices in units of the
charsize, and calling for filling of the symbol if ifill .ne. 0.
Thereafter acgen generates the sybol specified. Since the width and
height are scaled by chrswdth and chrshght, aspect-ratio can be scaled
using charsize().

<div class="p"><!----></div>
POLYERR(xv,yv,errv,ilength) Draw error bars yv to yv+errv.

<div class="p"><!----></div>

<h2> Axes
</h2>
AXIS() Automatic x and y axis.

<div class="p"><!----></div>
AXIS2() Put tics on the opposite side of the axis box.

<div class="p"><!----></div>
XAXIS(first,delta) Draw an axis; labels starting at first, spaced by delta.
If delta=0, autofit labels.

<div class="p"><!----></div>
YAXIS(first,delta) If axis is log, first indicates major subtic.

<div class="p"><!----></div>
ALTXAXIS(xi,xa) Draw an alternative xaxis whose ends have world values
scaled by the factors xi and xa.

<div class="p"><!----></div>
ALTYAXIS(yi,ya) Normally the axis position would be moved by
axptset(1.,1.) and probably ticrev(), all manually, before drawing.

<div class="p"><!----></div>
AXLABELS(cxlab,cylab) Label the x/y axes with strings.

<div class="p"><!----></div>
BOXTITLE(ctitle) Label the plot with a string centered at the top.

<div class="p"><!----></div>
GAXIS(amin,amax, igpow,first,delta, xmin,xmax,ymin,ymax, lpara,laxlog)
General axis with ends positioned at (xmin, ymin) (xmax, ymax) normal
units. World axis labels based on world end values amin, amax, first, delta,
igpow (power of ten label).  Lpara puts labels parallel (else
perp). Laxlog logarithmic.

<div class="p"><!----></div>
AXPTSET(xpt,ypt) Set the axis intersection point at specified fractions of
the full lengths of the axes. This determines where the axes are drawn.

<div class="p"><!----></div>
TICSET(xlen,ylen,xoff,yoff,ixw,iyw,ixp,iyp) Set tic lengths, label
offsets, widths, decimal points. Labels switched off by width
ixw <font face="symbol">£</font
> 0. Defaults set respectively if reals all =0 or ints all
=0. (Defaults: .015,.015,-.03,-.02,4,4,1,1)

<div class="p"><!----></div>
TICREV() Reverse the tics and labels to the other side of axis.

<div class="p"><!----></div>
TICLABTOG() Toggle the tic labels on and off.

<div class="p"><!----></div>
TICNUMSET(itics) Set the number of tics of axis (approximately).

<div class="p"><!----></div>

<h2> Text plotting
</h2>
<img align="right" src="fontshow.png">

<div class="p"><!----></div>
Special text is accessed via "\" or "!" followed by one of 
the following:


<dl compact="compact">
 <dt>
@</dt>
<dd>
       to normal font 0.
</dd>
 <dt>
A</dt>
<dd>       to font 1 (math)
</dd>
 <dt>
B</dt>
<dd>       to font 2 (italic)
</dd>
 <dt>
D</dt>
<dd>       Toggle subscript mode
</dd>
 <dt>
U</dt>
<dd>       Toggle superscript mode
</dd></dl>
JDRWSTR(xn,yn,cstring,just) Draw cstring at (xn,yn)(normal), justified
per parameter just:  0. centered, +1. normal left-justified, etc.

<div class="p"><!----></div>
DRCSTR(cstring) Draw cstring from current position. Leave at end of string.

<div class="p"><!----></div>
DRWSTR(xn,yn,cstring) Draw cstring from (xn,yn)norm. Leave at end of
string.

<div class="p"><!----></div>
WSTR(cstring) Real function: normal-units length of string at current size.

<div class="p"><!----></div>
CHARSIZE(width,height) Set character size. (0,0) sets default (.015,.015).

<div class="p"><!----></div>
CHARANGL(theta) Set character angle to horizontal in degrees.

<div class="p"><!----></div>
GETCANGL(theta) Get character angle to horizontal in degrees.

<div class="p"><!----></div>
ANNOTE [DOS only] Enter interactive annotation mode. Type help for help.

<div class="p"><!----></div>
GETFONT(fontname) Read a new fontset from file.

<div class="p"><!----></div>
LEGENDLINE(xg,yg,nsym,cstring) Draw a legendline at fractional
position in plot box: xg, yg.  Use symbol nsym if positive and  <font face="symbol">£</font
> 256.
If nsym &lt; 0 use both line and symbol. If nsym=0 put only line.  
If nsym=257 use nothing but put the string at the usual place.
If nsym=258 use nothing but put the string at the start of the line.

<div class="p"><!----></div>

<h2> Contouring
</h2>
<a href="contest.f"><img align="right" src="contest.png"></a>

<div class="p"><!----></div>
CONTREC(za,cworka,ixm,iym,zclv,icl) Simple contour of entire array za(ixm, iym)
at levels zclv(icl). If icl=0 fit contour levels instead. If icl.lt.0 no
line labels. Cworka is a work character array at least (ixm, iym).

<div class="p"><!----></div>
CONTOURL(za,cworka,iLdim,ixm,iym,zclv,icl,x,y,icsw) General contour
za(1:ixm(of ildim), iym) at zclv(icl) (or fit if icl=0, using zclv(1)
if non-zero to determine contour number) on a mesh defined by
x,y. Switch icsw determines call type: 0 equal spacing, x,y not used;
1 vectors x,y determine mesh; 2 arrays x,y determine mesh; bit 5 (16)
sets coloring; bit 6 (32) omits contour lines. Color contouring should
be done with icl .ge. 2 and the maximum and minimum values in zclv(1)
and zclv(icl). Then a gradlegend can be constructed with these values.

<div class="p"><!----></div>
CONTOUR(za,xa,ya,ix,iy,zclv,icl) Simple contour over mesh xa,ya of entire
arrays, needing no extra work space. No line labelling.

<div class="p"><!----></div>
AUTOCOLCONT(za,iLdim,ixm,iym) Color contour za on rectangular mesh.

<div class="p"><!----></div>

<h2> Three-dimensional routines
</h2>
<a href="hidtest.f"><img align="right" src="hidtest.png"></a>

<div class="p"><!----></div>
HIDWEB(xv,yv,za,iL,ix,iy,isw) Draw a 3-D web of za(ix,iy) (leading
dimension iL) at xv,yv.  View obtained from file eye.dat (3 reals) or
default if nonexistent. Switch isw: Lowest byte .lt.0 no axes;
abs(isw): 0,1 scale to fit; 2 use last scale; 4 don't hide
lines. Second byte (*256) color of web if non-zero. Third byte
(*65536) color of axes (if !=0). (Remains set).

<div class="p"><!----></div>
SURF3D(xa,ya,za,iL,ix,iy,isw,worka) Draw a 3-d surface of za(ix,iy),
(leading dimension iL) at xa,ya.  View obtained from file eye.dat (3
reals) or default if nonexistent. Switch isw: Lowest byte .lt.0 no
axes; abs(isw): 0,1 scale to fit; 2 use last scale. Second byte (*256)
color of web if non-zero. Third byte (*65536) color of axes (if
!=0). (Remains set). Array worka(0:iL+1,0:iy+1) must be provided.
Surface is drawn as quadrilaterals filled with color from gradient
according to (za) height scaled to the total height.

<div class="p"><!----></div>
AXON(xv,yv,za,iL,ix,iy) Plot axonometrically za(ix,iy) at xv,yv (i.e.
staggered slices at constant y, no perspective).  Use eye.dat data, if
exists; first two values indicate normal distance offset of axis end.

<div class="p"><!----></div>
WEBDRW(xv,yv,za,iL,ix,iy,icorner) Draw  a 3-D web using current projection.
Return closest corner to view point in icorner.

<div class="p"><!----></div>
SURFDR3(xa,ya,za,iL,ix,iy,worka) Draw 3-D surface using current projection.

<div class="p"><!----></div>
HIDINIT(top,bot) Set the top and bottom hiding horizons (usually 0.,1.).

<div class="p"><!----></div>
HDPRSET(isw,fxd) Set hiding and 2-3 projection per switch isw. Zero
off.  Positive: hiding only. Negative: hiding and projection with
fixed coordinate either (x,y,or z) for isw=(-1,-2 or -3) having value
fxd. For left handed system, isw=(-4,-5 or -6).

<div class="p"><!----></div>
HDPROJECT(ihide,iproject,ifixedcoord,fxdworld,irlsys)
Set hiding (ihide = 1), projecting 2<font face="symbol">®</font
>3 (iproject.ne.1), which
coordinate to hold fixed (ifixedcoord), what its world value is
(fxdworld), and right (+1) or left (-1) handed system (irlsys).

<div class="p"><!----></div>
SCALE3(xmin,xmax,ymin,ymax,zmin,zmax) Set 3-D world scaling to cube size.

<div class="p"><!----></div>
SETCUBE(xc,yc,zc,xcen,ycen) Set norm-value of cube edges (+-) and 2-d 
position of cube center.

<div class="p"><!----></div>
SCBN(icoord) Real function returns normalized value position of cube face
corresponding to coordinate icoord=constant (icoord =1,2,3). So for
example to project onto the z=constant (negative) face of the cube,
you do: call hdprset(-3,-scbn(3))

<div class="p"><!----></div>
TRN32(x,y,z,xt,yt,zt,ifl) If ifl=1, set 3-D transform; (x,y,z) is
point looked at, (xt,yt,zt) is eye. If ifl=2, set axonometric, offset
xt,zt.  If ifl=0 transform (x,y,z) to (xt,yt).

<div class="p"><!----></div>
VEC3W(x,y,z,ipen) Draw world vector to (x,y,z).

<div class="p"><!----></div>
VEC3N(x,y,z,ipen) Draw norm vector to (x,y,z). Domain (-1.,1.) covers
the cube.

<div class="p"><!----></div>
WXYZ2NXYZ(xw,yw,zw,xn,yn,zn) Transform from world 3-D vector to
normalized.

<div class="p"><!----></div>
CUBED(icorner) Draw a cube outline when icorner is the nearest.
Code is 1,2,3,4 anticlockwise (from top) from x3min,y3min, + top - bottom.

<div class="p"><!----></div>
AXIDENT3() Identify the 3 axes (logically x, y, z).

<div class="p"><!----></div>
AX3LABELS(charx,chary,charz) Label the three 3-D axes.

<div class="p"><!----></div>
AXPROJ(ic) Draw axes, centered at corner given by ic.
Corner=bits0-3(ic). If bit4(ic)=1, flip labels.  If bit5(ic)=1,
x-labels vertical; if bit6(ic)=1, y-labels vertical, else horizontal.

<div class="p"><!----></div>
HIDVECN(x2,y2,ipen) Draw a (2-D) vector, hiding appropriately.

<div class="p"><!----></div>
TN2S(px,py,sx,sy) Transform normalized to px,py to screen coordinates
sx,sy. If (world3.h) ihiding is  &lt; 0, project in direction of 3-d axis
mod(abs(ihiding),2) at value fixedn, right/left-handed when
(1 <font face="symbol">£</font
> <font face="symbol">-</font
>ihiding <font face="symbol">£</font
> 3 ) or (4 <font face="symbol">£</font
> <font face="symbol">-</font
>ihiding <font face="symbol">£</font
> 6).

<div class="p"><!----></div>
EYE3D(isw) Enter interactive rotation of the view of 3-D drawing. The
routine responds to a mouse drag in the window. On button release the
routine exits with isw=1 if motion occured or isw=0 if no
motion. Normally motion calls for a redraw of the plot and reentering
eye3d, while no motion is the signal to continue. Thus the following
code gives interactive examination of the object:


<dl compact="compact">
 <dt>
51</dt>
<dd>
Continue
</dd>
 <dt>
</dt>
<dd>Drawing commands ...
</dd>
 <dt>
</dt>
<dd>call eye3d(isw)
</dd>
 <dt>
</dt>
<dd>if(isw.ne.0)goto 51</dd></dl>IEYE3D() Integer function of convenience to return switch value of eye3d.

<div class="p"><!----></div>

<h2> Primitives
</h2>
VECW(x,y,ipen) Draw world-unit vector to (x,y) with pen up (ipen=0) or down (1).

<div class="p"><!----></div>
VECN(x,y,ipen) Draw norm-unit vector to (x,y) with pen up (0) or down (1).

<div class="p"><!----></div>
WX2NX(wx), WY2NY(wy) Real functions convert world to normal units.

<div class="p"><!----></div>
XN2XW(wx), YN2YW(wy) Real functions convert normal to world units.

<div class="p"><!----></div>
GTIC(xgw,ilab,xg,yg,tcos,tsin,axcos,axsin,lpara) Low level tic drawing.

<div class="p"><!----></div>

<h2> Utilities
</h2>
FITRANGE(min,max,itics,ipow,fac10,delta,first,xlast) Fit a maximum of
itics ticks to range (min, max). Decide a scaling factor 10<sup><span class="roman">ipow</span></sup>=fac10 and a sensible (scaled) delta between tics. First (xlast)
is integer multiple of delta lying closest to min (max) outside the
range (min,max). So fac10*(first+i*delta) are the tick values.

<div class="p"><!----></div>
MINMAX(xv,isize,min,max) Find min and max of vector of size isize.

<div class="p"><!----></div>
MINMAX2(xa,iL1,ix,iy,min,max) Find min and max of 2-d array of
leading dimension iL1, over indices (ix,iy).

<div class="p"><!----></div>
FWRITE(x,iwdth,ipoint,cstring) Format write the float x into cstring
with specified ipoint decimal places. Total width returned as iwdth.

<div class="p"><!----></div>
IWRITE(i,iwdth,cstring) Format the integer i into cstring, return iwdth.

<div class="p"><!----></div>
TERMCHAR(cstring) Terminate the string in 0, truncating trailing spaces.

<div class="p"><!----></div>
ASLEEP(iusec) Insert a delay of approximately iusec microsec into both
live plotting and ps files, for making sequential drawing animations.
Timing will be much slower over remote Xservers and serious bandwidth
wasted because delays are generated by writing to the screen. When
playing such ps files using ghostscript, the duration can be changed
by an arbitrary (real) factor by predefining the gs macro SF using a
command such as

<div class="p"><!----></div>
gs -c /SF 2.5 def -f plot0001.ps

<div class="p"><!----></div>
which causes the animation duration to be multiplied by 2.5

<div class="p"><!----></div>

<h2> Linking
</h2>
The routines are normally compiled and gathered into a library which
is subsequently linked against. The interface routines are contained in
vecx.c or vecwin.c. Of these driver files, the routines svga, txtmode,
vec, vecfill, scolor, accisgraddef, acgradcolor, getrgbcolor are
public, for calling by higher level routines, and possibly the user. 

<div class="p"><!----></div>
For X window systems, they require the Xlib and Xt libraries, calling
for compiler/linker arguments such as  -L/usr/X11R6/lib/ -lXt -lX11.

<div class="p"><!----></div>

<br /><br /><hr /><small>File translated from
T<sub><font size="-1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size="-1">T</font></sub>Hgold</a>,
version 3.70.<br />On 18 Sep 2005, 20:58.</small>
</html>
